(function(){var e={6741:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=6741,e.exports=t},673:function(e,t,a){"use strict";var n=a(9242),i=a(3396),o=a(7139);const s={class:"p-3"},r={class:"p-2 shadow rounded shadow",style:{background:"#5495ff",padding:"20px","box-shadow":"1px 1px 2px 1px grey","border-radius":"20px"}},d={key:0},c=(0,i._)("p",{class:"p-2 font-semibold text-lg animate__animated animate__bounce animate__infinite"},"Recognition ...",-1),l=[c],g={key:1},u={key:0},f=(0,i._)("span",{style:{"font-weight":"bold"}},"Ready ",-1),p={key:1},b={class:"text-lg"},h={key:0},m={key:1,class:"font-semibold"};function w(e,t,a,n,c,w){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",s,[(0,i._)("div",r,[c.recognition?((0,i.wg)(),(0,i.iD)("div",d,l)):((0,i.wg)(),(0,i.iD)("div",g,[c.dbFace?((0,i.wg)(),(0,i.iD)("div",u,[(0,i.Uk)("DB "),f,(0,i.Uk)(" ("+(0,o.zw)(c.dbTime.substring(0,15))+") ",1),(0,i._)("button",{type:"button",onClick:t[0]||(t[0]=(...e)=>w.saveDatabase&&w.saveDatabase(...e)),style:{background:"#ffc107","margin-left":"20px","border-radius":"10px",border:"1.5px solid grey",padding:"3px",position:"absolute",right:"10px"}},"Update DB")])):((0,i.wg)(),(0,i.iD)("div",p,"Loading Getting Database ... ")),(0,i._)("p",b,[(0,i.Uk)("Face Recognition : "),c.loading?((0,i.wg)(),(0,i.iD)("span",h,"Loading ...")):((0,i.wg)(),(0,i.iD)("span",m,"Ready"))])]))])])])}a(3767),a(8585),a(8696),a(7658);var v,y=a(1999),k=a(4161),_={data(){return{img:null,recognition:!1,loading:!0,dbFace:null,dbTime:""}},methods:{test(){v.postMessage("test")},async saveDatabase(){this.dbFace=!1,this.dbTime=!1;let e=await k.Z.get("https://hitfaceapi.my.id/contact"),t=e.data.datas;localStorage.setItem("db-face",JSON.stringify(t)),localStorage.setItem("db-time",new Date),this.loadDatabase()},loadDatabase(){localStorage.getItem("db-face")&&(this.dbFace=localStorage.getItem("db-face")),localStorage.getItem("db-time")&&(this.dbTime=localStorage.getItem("db-time"),console.log(this.dbTime)),this.$forceUpdate()},async startScan(e){let t=this;t.recognition=!1;var a=.6,n=new Image;n.src=this.img;let i,o,s=await y.bd(n,new y.aK({inputSize:320})).withFaceLandmarks(!0).withFaceDescriptor();if(s){const e=[new y.UL(s.detection.box.x,s.detection.box.y,s.detection.box.width,s.detection.box.height)];let t=await y.sE(n,e);0==t.length?o=!1:t.forEach((e=>{o=e.toDataURL()})),i=[new Float32Array(s.descriptor)]}else o=!1;if(!o)return t.recognition=!1,v.postMessage("false"),void v.postMessage(JSON.stringify({message:"Wajah tidak ditemukan",status:!1}));{let e=JSON.parse(localStorage.getItem("db-face"));if(!(e.length>0))return v.postMessage("false"),t.recognition=!1,void v.postMessage(JSON.stringify({message:"Tidak ada wajah di Database ",status:!1}));{const n=await Promise.all(e.map((async e=>{let t=JSON.parse(e.tensor);if(t&&t.length>0){const a=[];return t.forEach((e=>{a.push(new Float32Array(Object.values(e)))})),new y.oE(JSON.stringify({id_user:e.id_user}),a)}}))),o=new y.zi(n,a);if(s){const e=o.findBestMatch(s.descriptor);if("unknown"!=e._label){let a=JSON.parse(e.label);return t.recognition=!1,v.postMessage(JSON.stringify({message:"Wajah Mirip dengan id user = "+a.id_user,status:!0,duplicate:!0,confidence:100-100*e._distance,id_user:a.id_user})),void console.log(JSON.stringify({message:"Wajah Mirip dengan id user = "+a.id_user,status:!0,duplicate:!0,confidence:100-100*e._distance,id_user:a.id_user}))}if(i[0])return t.recognition=!1,void v.postMessage(JSON.stringify({message:"wajah tidak dikenali",status:!1,confidence:100-100*e._distance}))}}}},async loadModel(){var e="./model";await y.z2(e),await y.Qk(e),await y.vd(e),console.log("loading model berhasil ...");try{v.postMessage("loading"),this.loading=!1}catch(t){this.loading=!1}}},mounted(){let e=this;localStorage.getItem("db-face")||this.saveDatabase(),this.loadDatabase(),window.addEventListener("message",(function(t){"capturePort"==t.data&&null!=t.ports[0]&&(v=t.ports[0],v.onmessage=function(t){console.log(t.data),e.img=t.data,e.startScan()})}),!1),this.loadModel()}},O=a(89);const x=(0,O.Z)(_,[["render",w]]);var D=x,S=a(5431);(0,S.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),(0,n.ri)(D).mount("#app")}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,n,i,o){if(!n){var s=1/0;for(l=0;l<e.length;l++){n=e[l][0],i=e[l][1],o=e[l][2];for(var r=!0,d=0;d<n.length;d++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[d])}))?n.splice(d--,1):(r=!1,o<s&&(s=o));if(r){e.splice(l--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,i,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,o,s=n[0],r=n[1],d=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(d)var l=d(a)}for(t&&t(n);c<s.length;c++)o=s[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(l)},n=self["webpackChunkbackend_face_api"]=self["webpackChunkbackend_face_api"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(673)}));n=a.O(n)})();
//# sourceMappingURL=app.ded1cdb3.js.map