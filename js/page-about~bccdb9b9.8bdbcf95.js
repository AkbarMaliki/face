(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["page-about~bccdb9b9"],{"7dd8":function(e,t,a){"use strict";a.r(t);var n,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"p-3"},[a("div",{staticClass:"p-2 shadow bg-blue-300 rounded shadow"},[e.recognition?a("div",[a("p",{staticClass:"p-2 font-semibold text-lg animate__animated animate__bounce animate__infinite"},[e._v("Recognition ...")])]):a("div",[e.dbFace?a("div",[e._v("DB "),a("span",{staticClass:"font-semibold"},[e._v("Ready ")]),e._v(" ("+e._s(e.dbTime.substring(0,15))+") "),a("button",{staticClass:"btn btn-sm btn-style10 ml-4",attrs:{type:"button"},on:{click:e.saveDatabase}},[e._v("Update DB")])]):a("div",[e._v("Loading Getting Database ... ")]),a("p",{staticClass:"text-lg"},[e._v("Face Recognition : "),e.loading?a("span",[e._v("Loading ...")]):a("span",{staticClass:"font-semibold"},[e._v("Ready")])])])])])])},r=[],i=a("1da1"),c=(a("96cf"),a("0d03"),a("4160"),a("159b"),a("cfc3"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("d3b7"),a("ace4"),a("3ca3"),a("ddb0"),a("d81d"),a("07ac"),a("75bf")),o=a("bc3a"),d=a.n(o),u={data:function(){return{img:null,recognition:!1,loading:!0,dbFace:null,dbTime:""}},methods:{test:function(){n.postMessage("test")},saveDatabase:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dbFace=!1,e.dbTime=!1,t.next=4,d.a.get("https://hitfaceapi.my.id/contact");case 4:a=t.sent,n=a.data.datas,localStorage.setItem("db-face",JSON.stringify(n)),localStorage.setItem("db-time",new Date),e.loadDatabase();case 9:case"end":return t.stop()}}),t)})))()},loadDatabase:function(){localStorage.getItem("db-face")&&(this.dbFace=localStorage.getItem("db-face")),localStorage.getItem("db-time")&&(this.dbTime=localStorage.getItem("db-time"),console.log(this.dbTime)),this.$forceUpdate()},startScan:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s,r,o,d,u,l,b,g,f,p,m,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.recognition=!1,s=.6,r=new Image,r.src=t.img,e.next=7,c["f"](r,new c["d"]({inputSize:320})).withFaceLandmarks(!0).withFaceDescriptor();case 7:if(o=e.sent,o){e.next=12;break}u=!1,e.next=18;break;case 12:return l=[new c["c"](o.detection.box.x,o.detection.box.y,o.detection.box.width,o.detection.box.height)],e.next=15,c["g"](r,l);case 15:b=e.sent,0==b.length?u=!1:b.forEach((function(e){u=e.toDataURL()})),d=[new Float32Array(o.descriptor)];case 18:if(!u){e.next=47;break}if(g=JSON.parse(localStorage.getItem("db-face")),!(g.length>0)){e.next=41;break}return e.next=23,Promise.all(g.map(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=JSON.parse(t.tensor),!a){e.next=6;break}if(!(a.length>0)){e.next=6;break}return n=[],a.forEach((function(e){n.push(new Float32Array(Object.values(e)))})),e.abrupt("return",new c["b"](JSON.stringify({id_user:t.id_user}),n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 23:if(f=e.sent,p=new c["a"](f,s),!o){e.next=39;break}if(m=p.findBestMatch(o.descriptor),"unknown"!=m._label){e.next=34;break}if(!d[0]){e.next=32;break}return a.recognition=!1,n.postMessage(JSON.stringify({message:"wajah tidak dikenali",status:!1,confidence:100-100*m._distance})),e.abrupt("return");case 32:e.next=39;break;case 34:return h=JSON.parse(m.label),a.recognition=!1,n.postMessage(JSON.stringify({message:"Wajah Mirip dengan id user = "+h.id_user,status:!0,duplicate:!0,confidence:100-100*m._distance,id_user:h.id_user})),console.log(JSON.stringify({message:"Wajah Mirip dengan id user = "+h.id_user,status:!0,duplicate:!0,confidence:100-100*m._distance,id_user:h.id_user})),e.abrupt("return");case 39:e.next=45;break;case 41:return n.postMessage("false"),a.recognition=!1,n.postMessage(JSON.stringify({message:"Tidak ada wajah di Database ",status:!1})),e.abrupt("return");case 45:e.next=51;break;case 47:return a.recognition=!1,n.postMessage("false"),n.postMessage(JSON.stringify({message:"Wajah tidak ditemukan",status:!1})),e.abrupt("return");case 51:case"end":return e.stop()}}),e)})))()},loadModel:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="./model",t.next=3,c["j"](a);case 3:return t.next=5,c["i"](a);case 5:return t.next=7,c["h"](a);case 7:console.log("loading model berhasil ..."),n.postMessage("loading"),e.loading=!1;case 10:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;localStorage.getItem("db-face")||this.saveDatabase(),this.loadDatabase(),window.addEventListener("message",(function(t){"capturePort"==t.data&&null!=t.ports[0]&&(n=t.ports[0],n.onmessage=function(t){console.log(t.data),e.img=t.data,e.startScan()})}),!1),this.loadModel()}},l=u,b=(a("7e10"),a("2877")),g=Object(b["a"])(l,s,r,!1,null,null,null);t["default"]=g.exports},"7e10":function(e,t,a){"use strict";a("b4f6")},b4f6:function(e,t,a){}}]);
//# sourceMappingURL=page-about~bccdb9b9.8bdbcf95.js.map